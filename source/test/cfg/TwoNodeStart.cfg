#
# Copyright 2015 Formation Data Systems, Inc.
#
# TEST RESOURCES and TOPOLOGY

# TEST DESCRIPTION
# - Multi Node start

[user]
user_name       = root
password        = passwd

#========== Setup Nodes ===============
[node1]
om              = true
redis           = true
influxdb        = true
ip              = localhost
fds_root        = /fds/node1
fds_port        = 7000
services        = am,sm,dm

[node2]
enable          = true
ip              = localhost
fds_root        = /fds/node2
fds_port        = 7100
services        = am,dm,sm

[scenario_enable_2_dm_cluster_size_all_nodes]
log_marker      = Change platform.conf to set dm_cluster_size to two
script          = [testcases.TestFDSEnvMgt.TestModifyPlatformConf]
param_names     = current_string,replace_string,node,applyAll
params          = volumegrouping_dm_cluster_size.*, volumegrouping_dm_cluster_size = 2,node1,1

#========== Setup Domain and Data ===============
[scenario_kill_old]
log_marker      = Kill and uninstall old Domain
script          = [domain]
action          = kill-uninst

[scenario_install_domain]
log_marker      = Install the domain
script          = [domain]
action          = install-boot-activate

#========== Domain Bringup ===============
[scenario_verify_domain]
log_marker      = Verify all nodes are up
script          = [verify]
state           = up
fds_nodes       = node1,node2

#============= THE END ===================#
