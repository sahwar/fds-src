window.fdsDemo={Models:{},Collections:{},Views:{},Routers:{},Charts:{},init:function(){"use strict";this.app=new this.Views.ApplicationView,$(".main").append(this.app.$el),this.app.render()}},$(document).ready(function(){"use strict";fdsDemo.init()}),this.JST=this.JST||{},this.JST["app/scripts/templates/application.jst"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="sections">\n</div>\n\n';return __p},this.JST["app/scripts/templates/flow.jst"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="col-xs-10 io-outer">\n  <div class="ioflow"></div>\n</div>\n';return __p},this.JST["app/scripts/templates/image_item.jst"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="io-item pull-left">\n  <img src="'+(null==(__t=model.url)?"":__t)+'">\n</div>\n';return __p},this.JST["app/scripts/templates/read_graph.jst"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div id="read-graph"></div>\n';return __p},this.JST["app/scripts/templates/search.jst"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="search">\n  <div class="pull-left">\n    <img src="images/fds_logo_temp.png">\n  </div>\n  <section class="pull-right">\n    <div class="section-header"></div>\n    <form id="search">\n      <div class="input-group">\n        <input name="q" type="text" class="form-control" placeholder="Current Search Phrase: \''+(null==(__t=model.get("q"))?"":__t)+'\'">\n        <span class="input-group-btn">\n          <button class="btn btn-primary search" type="submit">Search <span class="glyphicon glyphicon-search"></span></button>\n       </span>\n      </div>\n    </form>\n  </section>\n</div>\n';return __p},this.JST["app/scripts/templates/section.jst"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="row settings"></div>\n\n<div class="image-carousel row">\n  <div class="col-xs-2">\n    '+(null==(__t=name)?"":__t)+'\n  </div>\n\n</div>\n\n<div class="row">\n  <div class="graphs"></div>\n</div>\n\n';return __p},this.JST["app/scripts/templates/settings_view.jst"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<section>\n  <div class="section-header">\n    <div>\n      <span>'+(null==(__t=model.get("title"))?"":__t)+'</span>\n      <span class="value">'+(null==(__t=model.get("value"))?"":__t)+"</span>\n      <span>"+(null==(__t=model.get("unit"))?"":__t)+'</span>\n    </div>\n  </div>\n  <div>\n    <input class="slider" type="text" data-slider-min="0" data-slider-max="'+(null==(__t=model.get("max_value"))?"":__t)+'" data-slider-step="1" data-slider-value="'+(null==(__t=model.get("value"))?"":__t)+'"/>\n  </div>\n</section>\n';return __p},fdsDemo.Utils=fdsDemo.Utils||{},function(){"use strict";fdsDemo.Utils.Timer=function(){this.initialize.apply(this,_.toArray(arguments))},fdsDemo.Utils.Timer.extend=Backbone.Model.extend,_.extend(fdsDemo.Utils.Timer.prototype,Backbone.Events,{initialize:function(a){_.extend(this,_.pick(a||{},"interval")),_.bindAll(this,"runTimer","clearTimer","trigger"),this.interval=this.interval||1e4},setInterval:function(a){this.interval=a},startTimer:function(){this.started||(this.started=!0,this.runTimer())},runTimer:function(){this.started&&(this.clearTimer(),this.timer=setTimeout(this.runTimer,this.interval),_.defer(this.trigger,"tick"))},clearTimer:function(){clearTimeout(this.timer)},stopTimer:function(){this.clearTimer(),this.started=!1}})}(),fdsDemo.Utils=fdsDemo.Utils||{},function(){function a(a){this.multiSwitchedTimer=a}function b(a){return a&&a.running()}function c(a,b,c){_.each(b,function(b){c[b]=_.bind(a[b],a)})}function d(a,b){var c=[].slice.call(arguments,2);_.each(a,function(a){a[b].apply(a,c)})}function e(a,b,c){_.each(b,function(b){c[b]=_.partial(d,a,b)})}function f(a){this.timer=a,this.timerDelegators=[],this.buildTimerDelegator()}function g(a){this.timers=a;var b=_.map(a,_.functions),c=_.uniq(_.reduce(b,function(a,b){return a.concat(b)}));e(this.timers,c,this)}a.extend=Backbone.Model.extend,_.extend(a.prototype,{stopTimer:function(){this._running=!1,this.multiSwitchedTimer.stop(this)},startTimer:function(){this._running=!0,this.multiSwitchedTimer.start(this)},running:function(){return!!this._running}}),fdsDemo.Utils.TimerUtilities={},_.extend(f.prototype,{buildTimerDelegator:function(){return this.TimerDelegator||(this.TimerDelegator=a.extend(this.timerMethods())),this.TimerDelegator},timerMethods:function(){if(!this.methods){this.methods={};var b=_.difference(_.functions(this.timer),_.functions(a.prototype));c(this.timer,b,this.methods)}return this.methods},createTimerDelegator:function(){var a=new this.TimerDelegator(this);return this.timerDelegators.push(a),a},start:function(){this.allTimerDelegatorsRunning()&&this.timer.startTimer()},stop:function(){this.timer.stopTimer()},allTimerDelegatorsRunning:function(){return _.all(this.timerDelegators,b)}}),fdsDemo.Utils.TimerUtilities.MultiSwitchedTimer=f,fdsDemo.Utils.TimerUtilities.MultiplexedTimer=g}(),fdsDemo.Charts=fdsDemo.Charts||{},function(){"use strict";fdsDemo.Charts.RealTimeChart=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function b(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}var c=this;c.guid=b(),c.DataSeries=[],c.Ticks=20,c.TickDuration=1e3,c.MaxValue=100,c.w=1400,c.h=300,c.margin={top:50,right:100,bottom:60,left:60},c.height=c.h-c.margin.top-c.margin.bottom,c.xText="",c.yText="",c.titleText="",c.chartSeries={},c.Init=function(){d3.select("#chart-"+c.guid).remove(),c.svg=d3.select("#graphs").append("svg").attr("id","chart-"+c.guid).attr("width",c.w).attr("height",c.h).append("g").attr("transform","translate("+c.margin.left+","+c.margin.top+")"),c.svg.append("defs").append("clipPath").attr("id","clip-"+c.guid).append("rect").attr("width",c.width).attr("height",c.height),c.color=d3.scale.category10(),c.color.domain(c.DataSeries.map(function(a){return a.Name})),c.xscale=d3.scale.linear().domain([0,c.Ticks]).range([0,c.width]),c.yscale=d3.scale.linear().domain([0,c.MaxValue]).range([c.height,0]),c.xAxis=d3.svg.axis().scale(d3.scale.linear().domain([0,c.Ticks]).range([c.width,0])).orient("bottom"),c.yAxis=d3.svg.axis().scale(c.yscale).orient("left"),c.stackData=[],c.line=d3.svg.line().interpolate("basis").x(function(a,b){return c.xscale(b-1)}).y(function(a){return a.display.y+a.display.y0}),c.area=d3.svg.area().interpolate("basis").x(function(a,b){return c.xscale(b-1)}).y0(function(a){return c.yscale(a.display?a.display.y0:a.Value)}).y1(function(a){return a.display?a.display.y+a.display.y0:c.height}),c.Title=c.svg.append("text").attr("id","title-"+c.guid).style("text-anchor","middle").text(c.titleText).attr("transform",function(){return"translate("+c.width/2+",-10)"}),c.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+c.yscale(0)+")").call(c.xAxis).append("text").attr("id","xName-"+c.guid).attr("x",c.width/2).attr("dy","3em").style("text-anchor","middle").text(c.xText),c.svg.append("g").attr("class","y axis").call(c.yAxis).append("text").attr("id","yName-"+c.guid).attr("transform","rotate(-90)").attr("y",0).attr("x",-c.height/2).attr("dy","-3em").style("text-anchor","middle").text(c.yText),c.svg.selectAll(".vline").data(d3.range(c.Ticks)).enter().append("line").attr("x1",function(a){return a*(c.width/c.Ticks)}).attr("x2",function(a){return a*(c.width/c.Ticks)}).attr("y1",function(){return 0}).attr("y2",function(){return c.height}).style("stroke","#eee").style("opacity",.5).attr("clip-path","url(#clip-"+c.guid+")").attr("transform","translate("+c.width/c.Ticks+",0)"),c.svg.selectAll(".hline").data(d3.range(c.Ticks)).enter().append("line").attr("x1",function(){return 0}).attr("x2",function(){return c.width}).attr("y1",function(a){return a*(c.height/(c.MaxValue/10))}).attr("y2",function(a){return a*(c.height/(c.MaxValue/10))}).style("stroke","#eee").style("opacity",.5).attr("clip-path","url(#clip-"+c.guid+")").attr("transform","translate(0,0)"),c.Series=c.svg.selectAll(".Series").data(window.stackData=c.stackData).enter().append("g").attr("clip-path","url(#clip-"+c.guid+")").attr("class","Series"),c.path=c.Series.append("path").attr("class","area").attr("d",function(a){return c.area(a.Data)}).style("fill",function(a){return c.color(a.Name)}).style("fill-opacity",.25).style("stroke",function(a){return c.color(a.Name)}),c.Legend=c.svg.selectAll(".Legend").data(c.DataSeries).enter().append("g").attr("class","Legend"),c.Legend.append("circle").attr("r",4).style("fill",function(a){return c.color(a.Name)}).style("fill-opacity",.5).style("stroke",function(a){return c.color(a.Name)}).attr("transform",function(a,b){return"translate("+(c.width+6)+","+(10+20*b)+")"}),c.Legend.append("text").text(function(a){return a.Name}).attr("dx","0.5em").attr("dy","0.25em").style("text-anchor","start").attr("transform",function(a,b){return"translate("+(c.width+6)+","+(10+20*b)+")"}),c.tick=function(a){c.thisTick=new Date;var b=parseInt(c.thisTick-c.lastTick),d=parseInt(c.lastTick-c.firstTick);if(900>b&&d>0)return void(c.lastTick=c.thisTick);if(!(a<c.DataSeries.length-1&&d>0)){c.lastTick=c.thisTick,d3.select("#yName-"+c.guid).text(c.yText),d3.select("#xName-"+c.guid).text(c.xText),d3.select("#title-"+c.guid).text(c.titleText),c.path.attr("d",function(a,b){return c.area(a.Data,b)}).attr("transform",null).transition().duration(c.TickDuration).ease("linear").attr("transform","translate("+c.xscale(-1)+",0)").each("end",function(a,b){c.tick(b)});for(var e in c.DataSeries)c.DataSeries[e].Data.shift();c.computeStackData()}},c.firstTick=new Date,c.lastTick=new Date,c.start=function(){c.firstTick=new Date,c.lastTick=new Date,c.tick(0)},c.start()},c.computeStackData=function(){var a=c.Ticks;for(var b in c.DataSeries)for(c.DataSeries[b].Data.push({Value:c.chartSeries[c.DataSeries[b].Name]});c.DataSeries[b].Data.length-1<a+3;)c.DataSeries[b].Data.unshift({Value:0});c.mangledData=_.map(c.DataSeries,function(a,b){return a.seriesIndex=b,a.Data=a.Data.map(function(a,c){return a.index=c,a.seriesIndex=b,a}),a});var d=0;if(_.each(c.mangledData,function(a){a.Data.length!=d&&d?d>a.Data.length?_.times(d-a.Data.length,function(){a.Data.unshift(_.last(a.Data||0))}):_times(a.Data.length-d,function(){a.Data.shift()}):d=a.Data.length}),c.mangledData.length){for(var e=d3.layout.stack().values(function(a){return a.Data}).x(function(a,b){return c.xscale(b-1)}).y(function(a){return c.yscale(a.Value)}).out(function(a,b,d){var e=0===function(a){return c.yscale(a.Value)}(a)?0:d;a.display={y:e,y0:b}})(c.mangledData);c.stackData.length;)c.stackData.shift();_.each(e,function(a){c.stackData.push(a)})}},c.addSeries=function(a){c.chartSeries[a]=0,c.DataSeries.push({Name:a,Data:[]}),c.computeStackData(),c.Init()},c.addValues=function(a,b){c.chartSeries[a]=b,c.computeStackData()}}}(),fdsDemo.Charts=fdsDemo.Charts||{},function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function b(a){var c=this;_.each(_.keys(b.prototype),function(d){c[d]=_.bind(b.prototype[d],a)})}function c(a){return a.margin=a.margin||{},a.margin={top:a.margin_top=a.margin.top||a.margin_top,right:a.margin_right=a.margin.right||a.margin_right,bottom:a.margin_bottom=a.margin.bottom||a.margin_bottom,left:a.margin_left=a.margin.left||a.margin_left},a.width||(a.width=a.w-a.margin.left-a.margin.right),a.height||(a.height=a.h-a.margin.top-a.margin.bottom),a}_.extend(b.prototype,{seriesKey:function(a){return a[this.seriesKey]},xCoord:function(a,b){return this.xscale(2*this.ticks-b+1)},y1Coord:function(a){return this.yscale(a.display.y1)},y0Coord:function(a){return this.yscale(a.display.y0)},baseYCoord:function(a){return a[this.valueKey]},textTransform:function(){return"translate("+this.width/2+",-10)"},nameColor:function(a){return this.color(a.Name)},seriesData:function(a){return this.area(a[this.dataKey])},composedDisplay:function(a,b,c){a.display={y1:b+c,y0:b}},dataset:function(a){return a[this.dataKey]},stackedData:function(){return this.stackLayout(this.DataSeries)},area:function(a){return this.area(a[this.dataKey])}}),fdsDemo.Charts.RealTimeStackedChart=function(){this.initialize&&this.initialize.apply(this,arguments)},fdsDemo.Charts.RealTimeStackedChart.extend=Backbone.Model.extend,_.extend(fdsDemo.Charts.RealTimeStackedChart.prototype,{defaults:{ticks:30,tickDuration:1e3,maxValue:100,w:1440,h:300,margin_top:50,margin_right:100,margin_bottom:60,margin_left:60,xText:"",yText:"",titleText:"",valueKey:"Value",seriesKey:"Name",dataKey:"Data"},initialize:function(a){if(!a.container)throw new Error("Option 'container' is requred.");this.container=a.container,this.extract=new b(this),_.bindAll(this,"tick","_nextTick","_addSeriesValue","_removeOldestValues","_backfillMissingValues"),this.setAttrs(a),c(this),this.DataSeries=[],this.ChartSeries={},this.color=d3.scale.category10(),this.color.domain(this.DataSeries.map(this.extract.seriesKey)),this.xscale=d3.scale.linear().domain([0,this.ticks]).range([0,this.width]),this.yscale=d3.scale.linear().domain([0,this.maxValue]).range([this.height,0]),this.xAxis=d3.svg.axis().scale(this.xscale.range([this.width,0])).orient("bottom").tickValues([30,0]),this.yAxis=d3.svg.axis().scale(this.yscale).orient("left").tickValues([0,50,100]),this.line=d3.svg.line().interpolate("basis").x(this.extract.xCoord).y(this.extract.y1Coord),this.area=d3.svg.area().interpolate("basis").x(this.extract.xCoord).y0(this.extract.y0Coord).y1(this.extract.y1Coord),this.stackLayout=d3.layout.stack().values(this.extract.dataset).x(this.extract.xCoord).y(this.extract.baseYCoord).out(this.extract.composedDisplay)},setAttrs:function(a){var b=_.keys(this.defaults),c=_.pick.apply(_,[a].concat(b).concat("margin"));_.extend(this,this.defaults,c),this.setGuid()},setGuid:function(){return this.guid||(this.guid=this.generateGuid()),this.guid},addSeries:function(a){if(void 0!==this.ChartSeries[a])throw new Error("Tried to add Same Series");this.ChartSeries[a]=0;var b=this._buildSeries(a);this._addSeriesValue(b),this._addSeriesValue(b),this.DataSeries.push(b),this.render()},hasSeries:function(a){return void 0!==this.ChartSeries[a]},_buildSeries:function(a){var b={Data:[]};return b[this.seriesKey]=a,b},addValue:function(a,b){this.ChartSeries[a]=b,this._addNewValues()},render:function(){this.rendered||(d3.select("#chart-"+self.guid).remove(),this._svg(),this._defs(),this._title(),this._xAxisText(),this._yAxisText(),this._series(),this._path(),this._legend(),this.rendered=!0),this._path(),this._legend(),this.ticking||this.tick(0)},_legend:function(){var a=this,b=this.svg.selectAll(".Legend").data(a.DataSeries).enter().append("g").attr("class","Legend");b.append("circle").attr("r",4).style("fill",function(b){return a.color(b.Name)}).style("fill-opacity",1).style("stroke",function(b){return a.color(b.Name)}).attr("transform",function(b,c){return"translate("+(a.width+6)+","+(10+20*c)+")"}),b.append("text").text(function(a){return a.Name}).attr("dx","0.5em").attr("dy","0.25em").style("text-anchor","start").attr("transform",function(b,c){return"translate("+(a.width+6)+","+(10+20*c)+")"})},_svg:function(){return this.svg=this.svg||d3.select(this.container).append("svg").attr("id","chart-"+this.guid).attr("width",this.w).attr("height",this.h).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.svg},_series:function(){return this.svg||this._svg(),this.series=this.series||this.svg.append("g").attr("clip-path","url(#clip-"+this.guid+")").attr("class","Series"),this.series},_path:function(){return this.series||this._series(),this.path=this.series.selectAll("path").data(this.extract.stackedData).enter().append("path").attr("d",this.area).style("fill",this.extract.nameColor).style("fill-opacity",1).style("stroke",this.extract.nameColor),this.path},_defs:function(){return this.svg||this._svg(),this.defs=this.defs||this.svg.append("defs").append("clipPath").attr("id","clip-"+this.guid).append("rect").attr("width",this.width).attr("height",this.height),this.defs},_title:function(){return this.svg||this._svg(),this.title=this.title||this.svg.append("text").attr("id","title-"+this.guid).style("text-anchor","middle").text(this.titleText).attr("transform",this.extract.textTransform),this.title},_xAxisText:function(){return this.svg||this._svg(),this.xAxisText=this.xAxisText||this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+this.yscale(0)+")").style({fill:"none",stroke:"#C8C8C8"}).call(this.xAxis).append("text").attr("id","xName-"+this.guid).attr("x",this.width/2).attr("dy","3em").style("text-anchor","middle").text(this.xText),this.xAxisText},_yAxisText:function(){return this.svg||this._svg(),this.yAxisText=this.yAxisText||this.svg.append("g").attr("class","y axis").style({fill:"none",stroke:"#C8C8C8"}).call(this.yAxis).append("text").attr("id","yName-"+this.guid).attr("transform","rotate(-90)").attr("y",0).attr("x",-this.height/2).attr("dy","-3em").style("text-anchor","middle").text(this.yText),this.yAxisText},tick:function(a){this.ticking=a+1,this._updateAxisLabels(),this._updatePath(a),this._addNewValues(),_.each(this.DataSeries,this._removeOldestValues)},stop:function(){this.ticking=void 0},_removeOldestValues:function(a){return a[this.dataKey].shift()},_nextTick:function(a,b){this.tick(b)},_updateAxisLabels:function(){d3.select("#xName-",this.guid).text(this.xText),d3.select("#yName-",this.guid).text(this.yText),d3.select("#title-",this.guid).text(this.titleText)},_updatePath:function(a){return this.DataSeries.length?(this.path||this._path(),this.series.selectAll("path").data(this.extract.stackedData).attr("d",this.extract.area).attr("transform","translate("+this.xscale(-1)+",0)").transition().duration(this.tickDuration).ease("linear").each("end",this._nextTick),this.path):void _.defer(this._nextTick,250,void 0,a)},_updateStackingProperties:function(){this.stackLayout(this.DataSeries)},_applyIndexes:function(){var a=this;_.each(this.DataSeries,function(b,c){b._index=c,_.each(b[a.dataKey],function(a,b){a.index=b,a.seriesIndex=c})})},_backfillMissingValues:function(a){for(;a[this.dataKey].length-1>this.ticks+3;)a[this.dataKey].shift();for(var b=this.ticks;a[this.dataKey].length-1<b+3;)a[this.dataKey].unshift(this._buildData(a))},_addNewValues:function(){_.each(this.DataSeries,this._addSeriesValue)},_addSeriesValue:function(a){a[this.dataKey].push(this._buildData(a)),this._backfillMissingValues(a)},_buildData:function(a,b){var c={};return c[this.valueKey]=void 0!==b?b:this._chartValue(a),c},_chartValue:function(a){var b=this.ChartSeries[a[this.seriesKey]];return b=b>0?b-.25:0,this.ChartSeries[a[this.seriesKey]]=b,b+1},generateGuid:function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}})}(),function(){fdsDemo.Models=fdsDemo.Models||{},fdsDemo.Models.Search=Backbone.Model.extend({defaults:{q:""},url:"/demo/search",initialize:function(a){return this.options=a,this.deferred=this.fetch()},submit:function(a){var b,c,d=this;return c={},_.each(a,function(a){return c[a.name]=a.value}),b=this.save(null,{wait:!0,emulateJSON:!0,data:c,success:function(){return d.set(c)},error:function(){return d.set("q","PLEASE TRY AGAIN")}})}})}.call(this),function(){fdsDemo.Models=fdsDemo.Models||{},fdsDemo.Models.Throttle=Backbone.Model.extend({defaults:{value:0,unit:"concurrent threads",max_value:20},baseUrl:"demo/throttle",validMethods:["reads","writes"],initialize:function(a){this.options=a,this.validateMethod(),this.update=_.debounce(_.bind(this.updater,this),500)},url:function(){return""+this.baseUrl+"/"+this.method},updater:function(a){var b=this;return this.newValue=a,$.ajax({type:"POST",url:""+this.url()+"/"+a,dataType:"json",success:function(){return b.set("value",b.newValue)},error:function(){return b.trigger("change")}})},validateMethod:function(){if(_.contains(this.validMethods,this.options.method))return this.method=this.options.method;if(!_.contains(this.validMethods,options.method))throw new Error("Must Init with Valid Method")}})}.call(this),fdsDemo.Models=fdsDemo.Models||{},function(){"use strict";fdsDemo.Models.Stats=Backbone.Model.extend({url:"/demo/stats"},{each:function(a,b){var c=this;_.each(a,function(a){var d=c.operation(a.operation),e=a.values,f=a.unit;b(d,e,f)})},operation:function(a){return this.operations_map[a||"none"]},operations_map:{"Read performance":"read","Write performance":"write",none:"none"}})}(),fdsDemo.Models=fdsDemo.Models||{},function(){"use strict";fdsDemo.Models.ReadImage=Backbone.Model.extend({url:"/demo/peekReadQueue",initialize:function(a){this.options=a}})}(),fdsDemo.Models=fdsDemo.Models||{},function(){"use strict";fdsDemo.Models.WriteImage=Backbone.Model.extend({url:"/demo/peekWriteQueue",initialize:function(a){this.options=a}})}(),fdsDemo.Collections=fdsDemo.Collections||{},function(){"use strict";fdsDemo.Collections.ImageRead=Backbone.Collection.extend({model:fdsDemo.Models.ReadImage,initialize:function(a){this.options=a}})}(),fdsDemo.Collections=fdsDemo.Collections||{},function(){"use strict";fdsDemo.Collections.ImageWrite=Backbone.Collection.extend({model:fdsDemo.Models.WriteImage,initialize:function(a){this.options=a}})}(),fdsDemo.Views=fdsDemo.Views||{},function(){"use strict";fdsDemo.Views.SectionView=Backbone.View.extend({template:JST["app/scripts/templates/section.jst"],className:"section",initialize:function(a){_.extend(this,_.pick(a,"timer","throttle","stats","name","xAxisText","app")),this.subViews={settings:new fdsDemo.Views.SettingsView({model:this.throttle,timer:this.timer}),flow:new fdsDemo.Views.IOFlow({collection:this.collection,timer:this.timer,name:this.name}),graph:new fdsDemo.Views.GraphView({collection:this.stats,timer:this.timer,titleText:this.name,xText:this.xAxisText})},this.listenTo(this.app,"rendered",this.renderGraph)},render:function(){return this.$el.html(this.template({name:this.name})),this.subViews.settings.render().$el.appendTo(this.$(".settings")),this.subViews.flow.render().$el.appendTo(this.$(".image-carousel")),this},renderGraph:function(){var a=this.subViews.graph.getGuid();this.$(".graphs").addClass("g"+a),this.subViews.graph.setContainer(".g"+a),this.subViews.graph.render()},enqueueSpotStats:function(a){this.subViews.graph.setValue(a)}})}(),fdsDemo.Views=fdsDemo.Views||{},function(){fdsDemo.Views.IOFlow=Backbone.View.extend({template:JST["app/scripts/templates/flow.jst"],item_template:JST["app/scripts/templates/image_item.jst"],PER_RATE:1e4,initialize:function(a){_.extend(this,_.pick(a,"timer")),_.bindAll(this,"renderItem","getModel"),this.listenTo(this.collection,"add",this.renderItem),this.listenTo(this.collection,"reset",this.clearAndRender),this.listenTo(this.timer,"tick",this.tick),this.items=[]},tick:function(){this.getModel(),this.$(".ioflow").children().length>4&&(this.$(".shove").remove(),this.$(".ioflow").children().first().addClass("shove"))},getModel:function(){var a=this,b=new this.collection.model;b.fetch().done(function(){a.collection.add(b)})},clearAndRender:function(){this.$el.empty(),this.render()},render:function(){return this.$el.html(this.template()),this.collection.each(this.renderItem),this},renderItem:function(a){ioOpHtml=this.item_template({model:a.toJSON()}),this.$(".ioflow").append(ioOpHtml)}})}(),fdsDemo.Views=fdsDemo.Views||{},function(){"use strict";fdsDemo.Views.SettingsView=Backbone.View.extend({template:JST["app/scripts/templates/settings_view.jst"],className:"settings col-xs-6",PER_RATE:1e4,events:{"slide .slider":"updateSlider"},initialize:function(a){_.bindAll(this,"updateSlider","setInterval"),_.extend(this,_.pick(a,"model","timer")),this.listenTo(this.model,"change",this.setIntervalFromModel),this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template({model:this.model})),this.slider=this.$(".slider").slider(),this},updateSlider:function(){var a=$('<span class="glyphicon glyphicon-refresh spinning">'),b=this.slider.slider("getValue");return this.$(".value").html(a),this.setInterval(b),this.model.update(b)},setIntervalFromModel:function(){this.setInterval(this.model.get("value"))},setInterval:function(a){a=Math.abs(a),a?(this.timer.setInterval(this.PER_RATE/a),this.timer.startTimer()):this.timer.stopTimer()}})}(),fdsDemo.Views=fdsDemo.Views||{},function(){"use strict";fdsDemo.Views.GraphView=Backbone.View.extend({initialize:function(a){_.extend(this,this.chartDefaults,_.pick.apply(_,[a,"timer","chart"].concat(_.keys(this.chartDefaults)))),_.bindAll(this,"tick"),this.sequence=5,this.chart=new fdsDemo.Charts.RealTimeStackedChart(_.extend({container:".graphs"},this)),this.listenTo(this.timer,"tick",this.tick)},chartDefaults:{xText:"",yText:"",titleText:"",Ticks:60,MaxValue:50},render:function(){return this.genRandomSequence(),this.update(),_.defer(_.bind(this.chart.render,this.chart),100),this},genRandomSequence:function(){},update:function(){var a=this;this.val&&_.each(this.val,function(b,c){a.chart.hasSeries(c)||a.chart.addSeries(c),a.chart.addValue(c,b)})},tick:function(){this.count=(1+(this.count||0))%5,this.count||this.genRandomSequence(),this.update()},setValue:function(a){this.val=_.extend(this.val||{},a)},getGuid:function(){return this.chart.setGuid()},setContainer:function(a){this.chart.container=a}})}(),fdsDemo.Views=fdsDemo.Views||{},function(){"use strict";fdsDemo.Views.StackedGraphView=Backbone.View.extend({initialize:function(a){_.extend(this,_.pick(a,"timer","node")),_.bindAll(this,"tick","enqueueEach"),this.DEFAULT_QUEUE_ITEM={Volume1:0,Volume2:0},this.dataqueue=[],this.series={},this.data=[];var b=this;_.times(1e3,function(){b.dataqueue.push({Volume1:[10*Math.random()],Volume2:[10*Math.random()]})}),this.listenTo(this.timer,"tick",this.tick)},initialValues:_.times(30,function(){return{y:0}}),pushData:function(){var a=this.data,b=this.dataqueue.shift(),c=this;_.each(b,function(b,d){var e=_.find(a,function(a){return a.Name==d});e||(e={Name:d,values:c.initialValues},a.push(e)),e.values.push({y:b[0]}),e.values.shift()})},render:function(){return this.baseTick=0,this.chart=nv.models.stackedAreaChart().margin({right:100}).height(200).x(function(a,b){return b}).y(function(a){return a.y}).useInteractiveGuideline(!0).rightAlignYAxis(!0).transitionDuration(500).showControls(!0).clipEdge(!0),this.rendered=!0,this.chart.xAxis.tickFormat(function(a){return a+1}),this.chart.yAxis.tickFormat(d3.format(",.2f")),console.log(this.data),d3.select(this.node).datum(this.data).call(this.chart),this},dequeue:function(){var a=this;return this.dataqueue.length&&_.map(this.dataqueue.shift(),function(b,c){a.series[c]=(a.series[c]||[]).concat([b])}),_.map(this.series,function(a,b){return{key:b,values:_.times(Math.max(30-a.length,0),function(){return[0]}).concat(a.slice(-30))}})},enqueueEach:function(a){this.dataqueue.push(a)},update:function(){this.baseTick=(this.baseTick||0)+1,this.rendered?(this.pushData(),this.chart.update()):this.render()},tick:function(){this.update()},xscale:d3.scale.linear().domain([0,30]).range([0,1e3]),yscale:d3.scale.linear().domain([0,20]).range([200,0])})}(),fdsDemo.Views=fdsDemo.Views||{},function(){"use strict";fdsDemo.Views.SearchView=Backbone.View.extend({template:JST["app/scripts/templates/search.jst"],events:{"submit form":"submit"},initialize:function(a){_.extend(this,_.pick(a,"timer")),this.adjustTimer(),_.bindAll(this,"adjustTimer","submit"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change",this.adjustTimer)},render:function(){return this.$el.html(this.template({model:this.model})),this},submit:function(a){a.preventDefault();var b=$(a.currentTarget).serializeArray();return this.timer.stopTimer(),this.model.submit(b).then(this.adjustTimer)},adjustTimer:function(){this.model.get("q")?this.timer.startTimer():this.timer.stopTimer()}})}(),fdsDemo.Views=fdsDemo.Views||{},function(){"use strict";var a=fdsDemo.Utils.TimerUtilities.MultiSwitchedTimer,b=fdsDemo.Utils.TimerUtilities.MultiplexedTimer;fdsDemo.Views.ApplicationView=Backbone.View.extend({template:JST["app/scripts/templates/application.jst"],initialize:function(){this.readCollection=new fdsDemo.Collections.ImageRead,this.writeCollection=new fdsDemo.Collections.ImageWrite,this.timers={read:new fdsDemo.Utils.Timer,write:new fdsDemo.Utils.Timer},this.mainTimer=new fdsDemo.Utils.Timer({rate:4}),this.mainTimer.stopTimer(),this.mainTimer.setInterval(1e3),this.listenTo(this.mainTimer,"tick",this.tick),this.delegates={readTimer:new a(this.timers.read),writeTimer:new a(this.timers.write)},this.delegates.searchTimer=new b([this.delegates.readTimer.createTimerDelegator(),this.delegates.writeTimer.createTimerDelegator(),this.mainTimer]),this.models={search:new fdsDemo.Models.Search,throttleReads:new fdsDemo.Models.Throttle({title:"Reads",method:"reads"}),throttleWrites:new fdsDemo.Models.Throttle({title:"Writes",method:"writes"}),stats:new fdsDemo.Models.Stats},this.views={searchView:new fdsDemo.Views.SearchView({model:this.models.search,timer:this.delegates.searchTimer}),readSection:new fdsDemo.Views.SectionView({collection:this.readCollection,throttle:this.models.throttleReads,stats:this.models.stats,name:"Reads",timer:this.delegates.readTimer.createTimerDelegator(),xAxisText:"Images read per second (by volume)",app:this}),writeSection:new fdsDemo.Views.SectionView({collection:this.writeCollection,throttle:this.models.throttleWrites,stats:this.models.stats,name:"Writes",timer:this.delegates.writeTimer.createTimerDelegator(),xAxisText:"Images written per second (by volume)",app:this})}},tick:function(){var a=this;$.get("/demo/pollStats",function(b){fdsDemo.Models.Stats.each(b,function(b,c){var d=a.views[b+"Section"];d&&d.enqueueSpotStats(c)})})},render:function(){return this.$el.html(this.template()),this.$("#sections").append(this.renderedViews()),this.trigger("rendered"),this},renderedViews:function(){return _.map(this.views,function(a){return a.render().$el})}})}();