angular.module("angular-fui").directive("fuiDropdown",function(){return{restrict:"E",transclude:!1,replace:!0,scope:{selected:"=",defaultLabel:"=",items:"=",background:"@",type:"@",callback:"=",backgroundColor:"@",skinny:"@",color:"@",border:"@"},templateUrl:"scripts/directives/angular-fui/fui-dropdown/fui-dropdown.html",controller:function($scope,$element){$scope.leftShift="0px",$scope.open=!1,$scope.currentLabel=$scope.defaultLabel,$scope.openList=function(){$scope.open=!$scope.open;var ulElem=$element.find("ul.dropdown-menu"),offset=ulElem.offset(),c=offset.left+ulElem[0].offsetWidth;c>innerWidth-8&&($scope.leftShift=innerWidth-8-c+"px")},$scope.selectItem=function(item){"action"!==$scope.type?($scope.currentLabel=item.name,$scope.selected=item):$scope.callback(item)},$scope.$watch("defaultLabel",function(){$scope.currentLabel=$scope.defaultLabel}),$scope.$watch("selected",function(newValue,oldValue){(!angular.isDefined($scope.currentLabel)||angular.isDefined(newValue)&&newValue!==oldValue)&&$scope.selectItem(newValue)})},link:function($scope,$element,$attrs){angular.isDefined($attrs.type)||($attrs.type="select")}}});