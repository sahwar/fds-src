angular.module("form-directives").directive("spinner",function(){return{restrict:"E",replace:!0,transclude:!1,scope:{value:"=",min:"@",max:"@",step:"@"},templateUrl:"scripts/directives/widgets/spinner/spinner.html",controller:function($scope,$timeout,$interval){$scope.upPressed=!1,$scope.downPressed=!1,$scope.autoPress={},$scope.maxlength=1;for(var dividend=$scope.max;dividend=dividend/10>=1;)$scope.maxlength++;var cancelAutoPress=function(){angular.isDefined($scope.autoPress)&&$interval.cancel($scope.autoPress)};$scope.incrementDown=function(){$scope.upPressed=!0,$timeout(function(){$scope.upPressed===!0&&($scope.autoPress=$interval($scope.increment,100))},300)},$scope.decrementDown=function(){$scope.downPressed=!0,$timeout(function(){$scope.downPressed===!0&&($scope.autoPress=$interval($scope.decrement,100))},300)},$scope.incrementUp=function(){$scope.upPressed=!1,cancelAutoPress()},$scope.decrementUp=function(){$scope.downPressed=!1,cancelAutoPress()},$scope.increment=function(){$scope.value=$scope.value+$scope.step>$scope.max?$scope.max:$scope.value+$scope.step},$scope.decrement=function(){$scope.value=$scope.value-$scope.step<$scope.min?$scope.min:$scope.value-$scope.step}},link:function($scope,$element,$attrs){angular.isDefined($attrs.step)||($attrs.step=1),"number"!=typeof $attrs.step&&($attrs.step=parseInt($attrs.step)),angular.isDefined($attrs.max)&&"number"!=typeof $attrs.max&&($attrs.max=parseInt($attrs.max)),angular.isDefined($attrs.min)&&"number"!=typeof $attrs.min&&($attrs.min=parseInt($attrs.min))}}});